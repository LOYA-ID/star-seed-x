# Star Seed X - Environment Variables
# Copy this file to .env and fill in your values
#
# CONFIGURATION PRIORITY (highest to lowest):
# 1. .env file (loaded via dotenv)
# 2. System environment variables
# 3. config/default.json values
#
# NOTE: config/default.json is MANDATORY and must exist

# ============================================
# SOURCE DATABASE (MariaDB)
# ============================================
SOURCE_DB_HOST=localhost
SOURCE_DB_PORT=3306
SOURCE_DB_USER=root
SOURCE_DB_PASSWORD=your_source_password
SOURCE_DB_NAME=source_database
SOURCE_TABLE_NAME=source_table
SOURCE_POOL_SIZE=5
SOURCE_QUERY_TIMEOUT=300000
SOURCE_MAX_RETRIES=3
SOURCE_RETRY_DELAY=1000

# ============================================
# DESTINATION DATABASE (MariaDB)
# ============================================
DEST_DB_HOST=localhost
DEST_DB_PORT=3306
DEST_DB_USER=root
DEST_DB_PASSWORD=your_destination_password
DEST_DB_NAME=destination_database
DEST_TABLE_NAME=destination_table
DEST_POOL_SIZE=5
DEST_QUERY_TIMEOUT=300000
DEST_MAX_RETRIES=3
DEST_RETRY_DELAY=1000

# ============================================
# ETL SETTINGS
# ============================================
# Number of rows per batch
ETL_BATCH_SIZE=1000

# Primary key column name
ETL_PRIMARY_KEY_COLUMN=id

# Column that indicates soft-deleted records
ETL_DELETED_FLAG_COLUMN=is_deleted

# SQL query template (use {{table}} as placeholder)
# WARNING: For complex SQL with JOINs, quotes, or special characters,
#          use config/default.json instead of .env
#          .env files don't handle multi-word values reliably
# Simple queries only:
ETL_SQL_QUERY=SELECT * FROM {{table}}

# Cron schedule expression (default: every 5 minutes)
# Format: minute hour day-of-month month day-of-week
ETL_CRON_SCHEDULE=*/5 * * * *

# Max retry attempts for failed operations
ETL_MAX_RETRIES=3

# Delay between retries in milliseconds
ETL_RETRY_DELAY=1000

# Force fresh start (clear all checkpoints on startup)
# Set to true to ignore existing checkpoints and start from scratch
ETL_FORCE_FULL_REFRESH=false

# Delay between each record processing in milliseconds
# Useful for throttling to prevent database overload
ETL_RECORD_DELAY=0

# ============================================
# SQLITE STATE DATABASE
# ============================================
SQLITE_DB_PATH=./data/etl_state.db

# ============================================
# LOGGING
# ============================================
# Log level: error, warn, info, debug
LOG_LEVEL=info

# Directory for log files
LOG_DIR=./logs
